<nav class="navbar navbar-expand-lg navbar-light fixed-top">
  <div class="container-md px-3">
    <a class="navbar-brand" href="/">
      <img src="/assets/images/logo-wide.png" alt="SEACrowd Logo" height="32">
    </a>
    <button
      class="navbar-toggler border-0"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon">
        <span class="line line-1"></span>
        <span class="line line-2"></span>
        <span class="line line-3"></span>
      </span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        {% for nav in site.data.navbar %}
          {% if nav.children %}
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="dropdown{{ forloop.index }}"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                {{ nav.name }}
              </a>
              <ul
                class="dropdown-menu"
                aria-labelledby="dropdown{{ forloop.index }}"
              >
                {% for child in nav.children %}
                  <li>
                    <a
                      class="dropdown-item {% if page.permalink == child.href or page.url == child.href %}active{% endif %}"
                      href="{{ child.href }}"
                    >
                      {{ child.name }}
                      {% if child.href == '/apprenticeship.html' %}
                        {% include apprenticeship-badge.html %}
                      {% endif %}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </li>
          {% else %}
            <li class="nav-item">
              <a
                class="nav-link {% if page.permalink == nav.href or page.url == nav.href %}active{% endif %}"
                href="{{ nav.href }}"
              >
                {{ nav.name }}
              </a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
</nav>

<script
  src="{{ '/assets/js/apprenticeship-dates.js' | relative_url }}"
></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Find the first badge element to get the data
    const badgeElement = document.querySelector(".apprenticeship-badge")

    if (badgeElement) {
      const openDate = badgeElement.getAttribute("data-open-date")
      const closeDate = badgeElement.getAttribute("data-close-date")
      if (openDate && closeDate) {
        // Initialize badge manager for navbar only
        initApprenticeshipBadges(openDate, closeDate)
      }
    }
  })
</script>
